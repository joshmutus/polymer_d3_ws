<!DOCTYPE html>
<html>
    <head>
        <!--I don't know if these next 3 meta tags are doing anything-->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

        <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
        <link rel="import" href="proto-element.html">
        <link rel="import" href="line-plot.html">
        <link rel="import" href="socket-button.html">
        <link rel="import" href="dir-list.html">
        <link rel="import" href="bower_components/paper-button/paper-button.html">
        <link rel="import" href="bower_components/paper-menu/paper-menu.html">
        <link rel="import" href="bower_components/paper-item/paper-item.html">
        <link href="css/materialize.css" rel="stylesheet" />

        <script src="http://d3js.org/d3.v3.min.js"></script>


  </head>
  <body>
    <div id="foo">asdasdads</div>
    <proto-element></proto-element>
    <br>
    <paper-button raised>button</paper-button>
    <paper-button raised>button2</paper-button>
    <socket-button id = "sb">Socket button</socket-button>
    <dir-list id = "listy"></dir-list>
    <line-plot></line-plot>
    <script>
        var dirSocket; //open a socket just for populating the directory list
        if(! ("WebSocket" in window)) WebSocket = MozWebSocket; // firefox
        dirSocket  = new WebSocket("ws://localhost:8076");

        dirSocket.onopen = function(event) {
            dirSocket.send('get_dirs');
        }
        dirSocket.onmessage = function(e) {
        //populate the directory list with content from web socket server
            newDir = JSON.parse(e.data);
            for (var j in newDir){
                listy.push('dirs',{jim:newDir[j],bob:"bar3"});
            }
        }
    </script>
  </body>
</html>